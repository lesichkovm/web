function Config(){this.getUniqueId=function(){return"undefined"==typeof APP_ID?JSON.stringify(window.location.hostname):APP_ID},this.getRootUrl=function(){return"undefined"==typeof WEBSITE_URL?window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+location.port:""):WEBSITE_URL},this.getApiUrl=function(){return"undefined"==typeof API_URL?window.location.protocol+"//"+window.location.hostname+(location.port?":"+window.location.port:"")+"/api":API_URL}}function Initialize(){this.debug=!0,this.get=function(t){return Registry.get(t)},this.set=function(t,e){return Registry.set(t,e)},this.getApiUrl=function(){return Config.getApiUrl()},this.getUrl=function(){return window.location.href},this.getUrlParams=function(){var t=window.location.search.substring(1).split("&"),e={};if(t.length)for(var n=0;n<t.length;n++){var i=t[n].split("=");e[unescape(i[0])]=unescape(i[1])}return e},this.getUrlParam=function(t){var e=this.getUrlParams();return void 0===e[t]?null:e[t]},this.getAuthUser=function(){return null===Registry.get("AuthUser")?null:Registry.get("AuthUser")},this.setAuthUser=function(t){return Registry.set("AuthUser",t)},this.getAuthToken=function(){return Registry.get("AuthToken")},this.setAuthToken=function(t){return Registry.set("AuthToken",t)},this.getLanguage=function(){var t=Registry.get("CurrentLanguage");return t=null===t?"en":t},this.setLanguage=function(t){return Registry.set("CurrentLanguage",t)},this.to=function(t,e,n){t.match("^http://")||t.match("^https://")||(t=((t,e)=>(e=e?(e+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"\\$1"):" \\s ",e=new RegExp("["+e+"]+$","g"),(t+"").replace(e,"")))(Config.getRootUrl(),["/"])+"/"+((t,e)=>(e=e?(e+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \\s ",e=new RegExp("^["+e+"]+","g"),(t+"").replace(e,"")))(t,["/"]));var i=void 0===e?"":Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&");return 0<i.length&&(t=t+(t.indexOf("?")<0?"?":"&")+i),"_blank"===(n=void 0===n?{}:n).target?((i=document.createElement("a")).href=t,i.target="_blank",i.style.display="none",document.body.appendChild(i),document.body.lastElementChild.click()):window.location.href=t,!1};var r={},i=-1;this.publish=function(n,i){return!!r[n]&&(setTimeout(function(){for(var t=r[n],e=t?t.length:0;e--;)t[e].func(n,i)},0),!0)},this.subscribe=function(t,e){r[t]||(r[t]=[]);var n=(++i).toString();return r[t].push({token:n,func:e}),n},this.unsubscribe=function(t){for(var e in r)if(r[e])for(var n=0,i=r[e].length;n<i;n++)if(r[e][n].token===t)return r[e].splice(n,1),t;return!1}}if("undefined"!=typeof require)try{let t=require("@lesichkovm/registryjs");Registry=t}catch(t){console.error("Failed to load @lesichkovm/registryjs:",t)}Config=new Config,Registry=new Registry(Config.getUniqueId()),$$=new Initialize;
