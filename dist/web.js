function Config(){this.getUniqueId=function(){return"undefined"==typeof APP_ID?JSON.stringify(window.location.hostname):APP_ID},this.getRootUrl=function(){return"undefined"==typeof WEBSITE_URL?window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+location.port:""):WEBSITE_URL},this.getApiUrl=function(){return"undefined"==typeof API_URL?window.location.protocol+"//"+window.location.hostname+(location.port?":"+window.location.port:"")+"/api":API_URL}}function Initialize(){this.debug=!0,this.get=function(e){return Registry.get(e)},this.set=function(e,t){return Registry.set(e,t)},this.getApiUrl=function(){return Config.getApiUrl()},this.getUrl=function(){return window.location.href},this.getUrlParams=function(){var e=window.location.search.substring(1).split("&"),t={};if(e.length)for(var n=0;n<e.length;n++){var i=e[n].split("=");t[unescape(i[0])]=unescape(i[1])}return t},this.getUrlParam=function(e){var t=this.getUrlParams();return void 0===t[e]?null:t[e]},this.getAuthUser=function(){return null===Registry.get("AuthUser")?null:Registry.get("AuthUser")},this.setAuthUser=function(e){return Registry.set("AuthUser",e)},this.getAuthToken=function(){return Registry.get("AuthToken")},this.setAuthToken=function(e){return Registry.set("AuthToken",e)},this.getLanguage=function(){var e=Registry.get("CurrentLanguage");return e=null===e?"en":e},this.setLanguage=function(e){return Registry.set("CurrentLanguage",e)},this.to=function(e,t,n){e.match("^http://")||e.match("^https://")||(e=((e,t)=>(t=t?(t+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"\\$1"):" \\s ",t=new RegExp("["+t+"]+$","g"),(e+"").replace(t,"")))(Config.getRootUrl(),["/"])+"/"+((e,t)=>(t=t?(t+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \\s ",t=new RegExp("^["+t+"]+","g"),(e+"").replace(t,"")))(e,["/"]));var i=void 0===t?"":Object.keys(t).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e])).join("&");return 0<i.length&&(e=e+(e.indexOf("?")<0?"?":"&")+i),"_blank"===(n=void 0===n?{}:n).target?((i=document.createElement("a")).href=e,i.target="_blank",i.style.display="none",document.body.appendChild(i),document.body.lastElementChild.click()):window.location.href=e,!1};var o={},i=-1;this.publish=function(n,i){return!!o[n]&&(setTimeout(function(){for(var e=o[n],t=e?e.length:0;t--;)e[t].func(n,i)},0),!0)},this.subscribe=function(e,t){o[e]||(o[e]=[]);var n=(++i).toString();return o[e].push({token:n,func:t}),n},this.unsubscribe=function(e){for(var t in o)if(o[t])for(var n=0,i=o[t].length;n<i;n++)if(o[t][n].token===e)return o[t].splice(n,1),e;return!1}}if("undefined"!=typeof require)try{let e=require("@lesichkovm/registryjs");Registry=e}catch(e){console.error("Failed to load @lesichkovm/registryjs:",e)}else if("undefined"!=typeof window&&window.Registry)Registry=window.Registry;else{if("undefined"==typeof globalThis||!globalThis.Registry)throw new Error("RegistryJS is required. Please include it before WebJS.");Registry=globalThis.Registry}Config=new Config,Registry=new Registry(Config.getUniqueId()),$$=new Initialize,"undefined"!=typeof module&&module.exports&&(module.exports=$$),"undefined"!=typeof exports&&(exports.default=$$),"undefined"!=typeof window&&(window.WebJS=$$);
